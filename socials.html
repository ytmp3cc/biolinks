<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Loading</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Montserrat:wght@300;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg-dark:#0d0d0f;
    --panel:#1e1e1f;
    --accent1:#8a00ff;
    --accent2:#c700ff;
    --ip-color:#ffd54f;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;background:
    radial-gradient(1200px 600px at 85% 75%, #6a00ff 0%, transparent 25%),
    linear-gradient(135deg,#0f0f10,#121214 60%);color:#fff;font-family:Montserrat,Segoe UI,Arial,Helvetica,sans-serif}
  .stage{height:100%;display:flex;align-items:center;justify-content:flex-start;padding-left:6%}
  .panel{width:720px;max-width:84%;padding:48px 64px;background:linear-gradient(180deg,var(--panel),rgba(0,0,0,0.08));transform:skew(-14deg);box-shadow:0 28px 60px rgba(0,0,0,0.7),0 6px 20px rgba(0,0,0,0.5),inset 0 1px 0 rgba(255,255,255,0.02);position:relative;border-radius:2px;}
  .panel:after{content:"";position:absolute;right:-100px;top:0;bottom:0;width:220px;background:linear-gradient(90deg,rgba(0,0,0,0.0),rgba(0,0,0,0.25));transform:skew(-14deg);}
  .inner{transform:skew(14deg);}
  h1.title{font-family:'Orbitron',sans-serif;font-size:84px;font-weight:400;color:#f5f5f5;margin-bottom:14px;}
  .sub{font-size:20px;color:#e8e8e8;opacity:0.9;margin-bottom:18px;}
  .progress-wrap{width:100%;height:18px;background:linear-gradient(180deg,#2b2b2b,#202020);border-radius:12px;overflow:hidden;box-shadow:0 6px 0 rgba(0,0,0,0.45) inset;margin-bottom:28px;}
  .progress{height:100%;width:0%;background:linear-gradient(90deg,var(--accent1),var(--accent2));box-shadow:0 2px 18px rgba(139,0,255,0.35);transition:width 0.45s cubic-bezier(.22,.9,.35,1);}
  .info{display:flex;gap:28px;align-items:center;margin-top:8px;}
  .ip-block{min-width:360px;padding:14px 18px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.06));border-radius:8px;box-shadow:0 6px 20px rgba(0,0,0,0.5);display:none;}
  .ip-big{font-family:'Orbitron',sans-serif;font-size:32px;color:var(--ip-color);text-shadow:0 0 12px rgba(255,213,79,0.25);font-weight:700;margin-bottom:6px;}
  .addr{font-size:16px;color:#eee;opacity:0.95;font-weight:600;}
  .brand{position:absolute;right:40px;top:26px;transform:skew(14deg);color:rgba(255,255,255,0.06);font-weight:700;letter-spacing:2px;font-size:14px;}
  @media (max-width:800px){.title{font-size:54px}.panel{padding:32px;width:620px}.ip-block{min-width:260px}}
</style>
</head>
<body>
  <div class="stage">
    <div class="panel" role="main" aria-live="polite">
      <div class="brand">Socials</div>
      <div class="inner">
        <h1 class="title">Loading</h1>
        <div class="sub">Preparing assets and links...</div>

        <div class="progress-wrap" aria-hidden="true">
          <div id="progress" class="progress" style="width:0%"></div>
        </div>

        <div class="info">
          <div id="ip-block" class="ip-block" aria-hidden="true">
            <div class="ip-big" id="ip-text">IP: <span id="ip-val">…</span></div>
            <div class="addr" id="addr-text">Address: <span id="addr-val">Fetching...</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  const progressEl = document.getElementById('progress');
  const ipBlock = document.getElementById('ip-block');
  const ipVal = document.getElementById('ip-val');
  const addrVal = document.getElementById('addr-val');

  let progress = 0;
  const totalDuration = 7000; // 7 seconds
  const stepInterval = 200;   // update every 200ms
  const increment = 100 / (totalDuration / stepInterval);

  function step(){
    progress += increment + (Math.random() * 2); // small randomness
    if(progress > 100) progress = 100;
    progressEl.style.width = progress + '%';

    if(progress < 100){
      setTimeout(step, stepInterval);
    } else {
      setTimeout(fetchIPAndLocation, 450);
    }
  }

  function fetchIPAndLocation(){
    ipVal.textContent = 'Fetching…';
    addrVal.textContent = 'Fetching…';

    fetch('https://api.ipify.org?format=json')
      .then(resp => resp.json())
      .then(data => {
        const ip = data.ip || '';
        ipVal.textContent = ip;
        return fetch('https://ipapi.co/' + encodeURIComponent(ip) + '/json/');
      })
      .then(resp => resp.json())
      .then(loc => {
        const city = loc.city || 'Unknown city';
        const region = loc.region || loc.region_code || 'Unknown region';
        const country = loc.country_name || loc.country || 'Unknown country';
        const postal = loc.postal || '';
        let addressStr = `${city}${region?(', ' + region):''}${country?(', ' + country):''}`;
        if(postal) addressStr += ` • ${postal}`;
        addrVal.textContent = addressStr;

        ipBlock.style.display = 'block';
        ipBlock.setAttribute('aria-hidden','false');
      })
      .catch(err => {
        console.warn('primary fetch failed, trying ipapi auto-detect', err);
        fetch('https://ipapi.co/json/')
          .then(r => r.json())
          .then(loc => {
            ipVal.textContent = loc.ip || 'Unknown';
            let addressStr = `${loc.city || 'Unknown city'}${loc.region?(', ' + loc.region):''}${loc.country_name?(', ' + loc.country_name):''}`;
            if(loc.postal) addressStr += ` • ${loc.postal}`;
            addrVal.textContent = addressStr;
            ipBlock.style.display = 'block';
          })
          .catch(()=> {
            ipVal.textContent = 'Unable to fetch';
            addrVal.textContent = 'Unable to fetch location';
            ipBlock.style.display = 'block';
          });
      });
  }

  step();
</script>
</body>
</html>
